# iPhoneショートカット設定ガイド

## 必要な準備
1. ダッシュボードサーバーを起動（`npm run dev`）
2. iPhoneとPCが同じWi-Fiネットワークに接続されていることを確認
3. サーバー起動時に表示されるIPアドレスを確認

## ショートカット作成手順

### 1. ヘルスケアデータの取得

以下のアクションを順番に追加：

#### 体重
- アクション: 「ヘルスケアサンプルを検索」
- タイプ: 体重
- 並び順: 開始日（新しい順）
- 制限: 1

#### 体脂肪率
- アクション: 「ヘルスケアサンプルを検索」
- タイプ: 体脂肪率
- 並び順: 開始日（新しい順）
- 制限: 1

#### 歩数（今日の合計）
- アクション: 「ヘルスケアサンプルを検索」
- タイプ: 歩数
- 開始日: 今日の開始
- 終了日: 現在の日付

#### アクティブエネルギー（今日の合計）
- アクション: 「ヘルスケアサンプルを検索」
- タイプ: アクティブエネルギー
- 開始日: 今日の開始
- 終了日: 現在の日付

### 2. 日付の設定

- アクション: 「日付をフォーマット」
- 日付: 現在の日付
- フォーマット: カスタム
- フォーマット文字列: `yyyy-MM-dd`

### 3. JSONデータの作成

- アクション: 「辞書」
- 内容:
  ```
  date: 日付（前のステップから）
  weight: ヘルスケアサンプル（体重）
  bodyFatPercentage: ヘルスケアサンプル（体脂肪率）
  steps: ヘルスケアサンプルの合計（歩数）
  activeCalories: ヘルスケアサンプルの合計（アクティブエネルギー）
  ```

### 4. API送信

- アクション: 「URLの内容を取得」
- URL: `http://[表示されたIPアドレス]:3000/api/health`
- メソッド: POST
- ヘッダー:
  - Content-Type: application/json
- 本文を要求: JSON（辞書を選択）

## 自動実行の設定

1. ショートカットアプリの「オートメーション」タブ
2. 「個人用オートメーションを作成」
3. トリガー: 時刻（例: 21:00、毎日）
4. アクション: 作成したショートカットを実行
5. 「実行の前に尋ねる」をオフ

## トラブルシューティング

- **接続エラー**: PCとiPhoneが同じWi-Fiにいるか確認
- **データが反映されない**: ブラウザを更新（5秒ごとに自動更新）
- **JSONエラー**: キー名のスペースに注意（bodyFatPercentageの前にスペースを入れない）